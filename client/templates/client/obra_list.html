{% extends 'dashboard.html' %}
{% load i18n account static crispy_forms_tags %}
{% block title %}
    Lista de Obras
{% endblock title %}
{% block dashboard %}   


<!--Menu-->
<nav class="navbar navbar-expand-sm navbar-dark">
  <div class="container-fluid">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarTogglerDemo01">            
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="#"></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#"></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#"></a>
        </li>                           
      </ul>        
      <div class="btn-toolbar" role="toolbar" aria-label="Toolbar com grupos de botões">          
          <div class="btn-group mr-2" role="group" aria-label="Primeiro grupo">
              <a href="{% url 'client:client_list_create' %}" >
                  <button class="btn bg-gradient-primary" type="submit" >Clientes</button>
              </a>      
            </div>            
      </div>    
    </div>
  </div>
</nav>

<div class="container-fluid mt-2">
  <div class="container-form">
    <div class="card">
      <div class="card-header p-1">
        <div class="row">
          <div class="col-sm-12 col-md-6">
            <h3 class="form-title m-2">Lista de Obras do Cliente - {{ cliente.nome_contato }}</h3>
          </div>
          <div id="bottom_list" class="col-sm-12 col-md-6">
            <div class="row my-3">
              <form method="POST">                   
                <a href="{% url 'client:obra_create' cliente.pk %}" class="btn float-end">
                  <i class="fas fa-plus-circle fa-2x"></i>
                </a>
                <div class="modal fade" 
                  id="exampleModal"
                  tabindex="-1"
                  role="dialog"
                  aria-labelledby="exampleModalLabel"
                  aria-hidden="true">
                  <div class="modal-dialog dateAdmin" role="document">
                    <div class="modal-content ">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Nova Obra</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            {% csrf_token %}
                            {{ form.non_field_errors }}
                            {{ form.media }} 
                            {{ form.crispy }}                                                                             
                        </div>
                        <div class="modal-footer">
                          <div class="form-group form-button">
                            <input type="submit"
                              name="signup"
                              id="signup"
                              class="form-submit"
                              value="Salvar"/>
                          </div>
                        </div>
                    </div>
                  </div>
                </div>                
              </form>
            </div>
          </div>
        </div>
      </div>     
      <div class="table-responsive">
        <table id="myTable1" class="table table-striped table-bordered mt-5">                      
          <thead>
            <tr>
              <th>Cliente</th>                                
              <th>Responsável pela Obra</th>
              <th>Logradouro</th>
              <th>Número</th>
              <th>Estado</th>
              <th>Cidade</th>
              <th>Editar</th>
              <th>Excluir</th>
            </tr>
          </thead>
          
          <tbody>
            {% for e in obra %}               
                <tr>
                  <td align="center">{{ e.cliente }}</td>                                    
                  <td align="center">{{ e.responsavel }}</td>
                  <td align="center">{{ e.logradouro }}</td>
                  <td align="center">{{ e.numero }}</td>
                  <td align="center">{{ e.estado }}</td>
                  <td align="center">{{ e.cidade }}</td>
                  
                  <td align="center">
                      <a href="{% url 'client:obra_update' e.cliente_id e.pk %}" class="btn">
                          <i class="fas fa-user-edit"></i>
                      </a>
                  </td>

                  <td align="center">
                      <a href="{% url 'client:obra_delete' e.cliente_id e.pk %}" class="btn">
                          <i class="fas fa-solid fa-trash"></i>
                      </a>
                  </td>
                </tr>        
            {% endfor %}                             
          </tbody> 
        </table>
      </div> 
    </div>
  </div>
</div> 
<script>
  function locationreload() {
    location.reload();
               
  }
</script>
<!--
<div class="input-group date">
    <input type="date" class="form-control" value="12-02-2012" id="datepickers">
    <div class="input-group-addon">
        <span class="glyphicon glyphicon-th"></span>
    </div>
</div>
 <script type="text/javascript">
   $('#datepickers').datepicker();
 </script-->
{% endblock %}

